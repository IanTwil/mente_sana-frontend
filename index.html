<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenido | MenteSana</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: radial-gradient(circle at center, #2c3e50, #1a252f);
            height: 100vh; display: flex; align-items: center; justify-content: center;
            overflow: hidden; color: white;
        }
        .background {
            position: absolute; inset: 0;
            background-image: url('https://images.unsplash.com/photo-1499209974431-9dac3adaf471?auto=format&fit=crop&q=80&w=1600');
            background-size: cover; background-position: center;
            filter: brightness(0.4); z-index: 1;
            animation: scaleBg 30s infinite alternate ease-in-out;
        }
        @keyframes scaleBg { from { transform: scale(1); } to { transform: scale(1.15); } }

        .welcome-card {
            position: relative; z-index: 10;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(25px);
            padding: 3rem 2rem; border-radius: 35px;
            text-align: center; width: 90%; max-width: 450px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .logo { font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .logo i { color: #1abc9c; margin-right: 10px; } /* Icono del logo */
        .logo span { color: #1abc9c; }

        /* --- NUEVO: ESTILO DE TARJETAS DE ROL --- */
        .role-selection {
            display: flex; gap: 15px; margin-bottom: 20px; margin-top: 1.5rem;
        }
        .role-card {
            flex: 1; background: rgba(255,255,255,0.1);
            padding: 15px; border-radius: 18px; cursor: pointer;
            transition: 0.3s; border: 2px solid transparent;
        }
        .role-card i { font-size: 1.5rem; display: block; margin-bottom: 8px; }
        .role-card span { font-size: 0.9rem; font-weight: 500; }
        .role-card.active {
            background: rgba(26, 188, 156, 0.2);
            border-color: #1abc9c; color: #1abc9c;
        }

        input {
            padding: 16px; border-radius: 18px; border: none;
            font-size: 1rem; text-align: center; outline: none;
            background: rgba(255, 255, 255, 0.9); color: #2c3e50;
            width: 100%; margin-bottom: 12px;
        }
        .pin-field { display: none; border: 2px solid #1abc9c; }

        .btn-start {
            padding: 18px; border-radius: 20px; border: none;
            background: linear-gradient(135deg, #1abc9c, #16a085);
            color: white; font-size: 1.1rem; font-weight: 600;
            cursor: pointer; width: 100%; transition: 0.3s;
        }
        .btn-start:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(26,188,156,0.4); }

        .loader {
            border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #1abc9c;
            border-radius: 50%; width: 45px; height: 45px;
            animation: spin 1s linear infinite; margin: 20px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="background"></div>

    <div class="welcome-card">
        <div class="logo"><i class="fas fa-hand-holding-heart"></i>Mente<span>Sana</span></div>
        <p id="sub-tag" style="opacity: 0.8;">Tu refugio digital de paz</p>

        <div id="input-section">
            <div class="role-selection">
                <div class="role-card active" id="role-est" onclick="selectRole('Estudiante')">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Estudiante</span>
                </div>
                <div class="role-card" id="role-inv" onclick="selectRole('Invitado')">
                    <i class="fas fa-user-tie"></i>
                    <span>Invitado</span>
                </div>
            </div>

            <input type="text" id="userName" placeholder="Escribe tu nombre aquí" autocomplete="off">
            <input type="password" id="userPin" class="pin-field" placeholder="PIN de Seguridad (4 dígitos)" maxlength="4">

            <button class="btn-start" onclick="startExperience()">
                Comenzar viaje <i class="fas fa-arrow-right" style="margin-left: 8px; font-size: 0.9rem;"></i>
            </button>
        </div>

        <div id="greeting-message" style="display:none;">
            <h2 id="personal-hello"></h2>
            <div class="loader"></div>
            <p id="countdown" style="font-size: 0.9rem; opacity: 0.7;">Preparando tu espacio...</p>
        </div>
    </div>

    <script>
        let currentRole = 'Estudiante';

        function selectRole(role) {
            currentRole = role;
            // Actualizar UI de tarjetas
            document.getElementById('role-est').classList.toggle('active', role === 'Estudiante');
            document.getElementById('role-inv').classList.toggle('active', role === 'Invitado');
            
            // Mostrar/Ocultar PIN
            const pinField = document.getElementById('userPin');
            pinField.style.display = (role === 'Estudiante') ? 'block' : 'none';
        }

        function startExperience() {
            const name = document.getElementById('userName').value.trim();
            const pin = document.getElementById('userPin').value;

            if (currentRole === 'Estudiante' && (name === "" || pin.length < 4)) {
                alert("Por favor, ingresa tu nombre y un PIN de 4 dígitos para identificarte.");
                return;
            }

            const finalName = (name === "" && currentRole === "Invitado") ? "Invitado" : name;

            localStorage.setItem('usuarioMenteSana', finalName);
            localStorage.setItem('rolMenteSana', currentRole);

            document.getElementById('input-section').style.display = 'none';
            document.getElementById('sub-tag').style.display = 'none';
            document.getElementById('greeting-message').style.display = 'block';
            document.getElementById('personal-hello').innerText = `¡Hola, ${finalName}!`;

            setTimeout(() => { window.location.href = 'inicio.html'; }, 3000);
        }
    </script>
</body>
</html>