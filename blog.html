<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca | MenteSana</title>
    <style>
        :root {
            --primary: #1abc9c;
            --dark-bg: #1a252f;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-light: #ecf0f1;
            --modal-dark: #243447;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-light);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
        }

        .logo span {
            color: var(--primary);
        }

        .nav-menu {
            display: flex;
            gap: 20px;
            list-style: none;
        }

        .nav-link {
            font-size: 1rem;
            font-weight: 500;
            color: #ecf0f1;
            text-decoration: none;
            transition: 0.3s;
        }



        .nav-link:hover,
        .nav-link.active {
            color: #1abc9c;
        }


        .hamburger {
            display: none;
            cursor: pointer;
        }

        .bar {
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px auto;
            transition: all 0.3s ease-in-out;
            background-color: white;
        }


        main {
            flex: 1;
            max-width: 1100px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .intro-text {
            text-align: center;
            margin-bottom: 3rem;
        }

        .intro-text h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .intro-text p {
            color: #bdc3c7;
            font-size: 1.1rem;
        }


        .blog-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        .blog-card {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: 0.3s;
            cursor: pointer;
        }

        .blog-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
        }

        .blog-img {
            width: 100%;
            height: 220px;
            /* Ajusta esta altura seg칰n prefieras */

            /* EL SECRETO PARA QUE NO SE CORTE: */
            background-size: cover;
            /* La imagen llena el espacio sin deformarse */
            background-position: center;
            /* Centra la imagen para que no se corten las caras */
            background-repeat: no-repeat;

            background-color: #2c3e50;
            opacity: 0;
            transition: opacity 0.6s ease-in;

            /* Opcional: redondea las esquinas superiores para que encaje con la tarjeta */
            border-radius: 8px 8px 0 0;
        }

        .blog-content {
            padding: 1.5rem;
        }

        .blog-content h3 {
            color: var(--primary);
            margin-bottom: 0.8rem;
            font-size: 1.4rem;
        }

        .blog-content p {
            color: #bdc3c7;
            font-size: 0.95rem;
        }

        /* --- MODAL DE LECTURA OSCURO --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-content {
            background: var(--modal-dark);
            color: var(--text-light);
            width: 100%;
            max-width: 850px;
            max-height: 85vh;
            border-radius: 20px;
            position: relative;
            overflow-y: auto;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2.5rem;
            cursor: pointer;
            color: var(--text-light);
            transition: 0.3s;
        }

        .close-modal:hover {
            color: var(--primary);
        }

        .modal-body h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
            color: var(--primary);
        }

        .modal-body p {
            margin-bottom: 1.2rem;
            text-align: justify;
            line-height: 1.8;
            color: #cbd5e0;
        }


        .pdf-container {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 5px solid #e74c3c;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .pdf-link {
            background: #e74c3c;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: 0.3s;
        }

        .pdf-link:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        /* --- FOOTER --- */
        footer {
            background-color: #2c3e50;
            color: #bdc3c7;
            text-align: center;
            padding: 2rem;
            margin-top: auto;
        }


        @media (max-width: 768px) {
            .blog-grid {
                grid-template-columns: 1fr;
            }

            .hamburger {
                display: block;
            }

            .hamburger.active .bar:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active .bar:nth-child(1) {
                transform: translateY(8px) rotate(45deg);
            }

            .hamburger.active .bar:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }

            .nav-menu {
                position: fixed;
                left: -100%;
                top: 70px;
                flex-direction: column;
                background-color: #2c3e50;
                width: 100%;
                text-align: center;
                transition: 0.3s;
                box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);


                max-height: calc(100vh - 70px);
                overflow-y: auto;
                padding-bottom: 30px;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-item {
                margin: 16px 0;
            }

            .pdf-container {
                justify-content: center;
                text-align: center;
            }
        }

        .modal-content {
            background: var(--modal-dark);
            color: var(--text-light);
            width: 100%;
            max-width: 850px;
            max-height: 85vh;
            border-radius: 20px;
            position: relative;
            overflow-y: auto;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);

            animation: aparecerRelajante 0.6s ease-out forwards;
        }

        @keyframes aparecerRelajante {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(0px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: backdrop-filter 0.5s ease, opacity 0.5s ease;
            opacity: 0;
        }

        .modal-overlay.active {
            opacity: 1;
            backdrop-filter: blur(12px);
        }

        .modal-content {
            background: var(--modal-dark);
            transform: scale(0.9) translateY(30px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .modal-overlay.closing .modal-content {
            transform: scale(0.9) translateY(-20px);
            opacity: 0;
        }

        .modal-overlay.closing {
            opacity: 0;
            backdrop-filter: blur(0px);
        }

        .tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .tag-mente {
            background: #3498db;
            color: white;
        }

        .tag-cuerpo {
            background: #e67e22;
            color: white;
        }

        .tag-digital {
            background: #9b59b6;
            color: white;
        }

        .tag-social {
            background: #f1c40f;
            color: #2c3e50;
        }

        blockquote {
            margin: 25px 0;
            padding: 20px 30px;
            border-left: 4px solid var(--primary);
            background: rgba(26, 188, 156, 0.1);
            font-style: italic;
            font-size: 1.1rem;
            color: #fff;
            position: relative;
        }

        blockquote::before {
            content: '"';
            font-size: 4rem;
            color: var(--primary);
            position: absolute;
            left: 5px;
            top: -10px;
            opacity: 0.3;
        }

        /* --- DISE칌O DE COMENTARIOS --- */
        .comment-section {
            margin-top: 50px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .comment-section h4 {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .comment-section h4::before {
            content: '游눫';
            font-size: 1.2rem;
        }

        .comment-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 40px;
        }

        .comment-input-name,
        .comment-input-text {
            width: 100%;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px 15px;
            color: white;
            font-family: inherit;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .comment-input-name:focus,
        .comment-input-text:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(26, 188, 156, 0.05);
            box-shadow: 0 0 10px rgba(26, 188, 156, 0.1);
        }

        .comment-input-text {
            min-height: 100px;
            resize: vertical;
        }

        .btn-send-comment {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(26, 188, 156, 0.2);
        }

        .btn-send-comment:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(26, 188, 156, 0.3);
            filter: brightness(1.1);
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .comment-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            animation: fadeIn 0.5s ease forwards;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.85rem;
        }

        .comment-author {
            font-weight: bold;
            color: var(--primary);
        }

        .comment-date {
            color: #7f8c8d;
        }

        .comment-text {
            color: #cbd5e0;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #canvas-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: #2c3e50;
        }

        body {
            background-color: transparent;
            /* Dejamos ver el canvas */
            color: #ecf0f1;
        }

        .article-card {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: none;
        }

        .article-card h3 {
            color: #2c3e50;
        }

        .article-card p {
            color: #666;
        }

        .hero {
            background: transparent;
            box-shadow: none;
        }

        .hero::after {
            background: rgba(44, 62, 80, 0.8);
        }

        .article-card {
            opacity: 0;
            transform: translateY(40px) scale(0.95);
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            visibility: hidden;
        }

        .article-card.reveal {
            opacity: 1;
            transform: translateY(0) scale(1);
            visibility: visible;
        }

        .article-card:hover {
            transform: translateY(-10px) !important;
            box-shadow: 0 15px 35px rgba(26, 188, 156, 0.2);
        }

        .article-card {
            contain: layout;
            will-change: transform, opacity;
        }

        #canvas-particles {
            pointer-events: none;
        }


        /* Esta clase la pondr치 el JavaScript autom치ticamente */
        .blog-img.loaded {
            opacity: 1 !important;
        }
    </style>
</head>

<body>
    <canvas id="canvas-particles"></canvas>
    <header>
        <nav class="navbar">
            <a href="inicio.html" class="logo">Mente<span>Sana</span></a>
            <ul class="nav-menu">
                <li class="nav-item"><a href="inicio.html" class="nav-link">Inicio</a></li>
                <li class="nav-item"><a href="causas.html" class="nav-link">Causas</a></li>
                <li class="nav-item"><a href="sintomas.html" class="nav-link">S칤ntomas</a></li>
                <li class="nav-item"><a href="ayuda.html" class="nav-link">Ayuda Emocional</a></li>
                <li class="nav-item"><a href="ludica.html" class="nav-link">Expresi칩n L칰dica</a></li>
                <li class="nav-item"><a href="blog.html" class="nav-link active">Biblioteca</a></li>
                <li class="nav-item"><a href="contacto.html" class="nav-link">Contacto</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <main>
        <div class="intro-text">
            <h1>Biblioteca de Bienestar</h1>
            <p>Recursos seleccionados para fortalecer tu resiliencia y paz mental.</p>
        </div>

        <div class="blog-grid">
            <article class="blog-card" onclick="openModal('respiracion')">
                <div class="blog-img lazy-bg"
                    data-bg="https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=600">
                </div>
                <div class="blog-content">
                    <span class="tag tag-mente">Mente</span>
                    <h3>Respiraci칩n Consciente</h3>
                    <p>Aprende c칩mo el control del ox칤geno puede desactivar la respuesta de estr칠s en segundos...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('autoestima')">
                <div class="blog-img lazy-bg" data-bg="imgs/autoestima.jpg"></div>

                <div class="blog-content">
                    <span class="tag tag-social">Social</span>
                    <h3>El Espejo Interior</h3>
                    <p>Descubre c칩mo el di치logo interno moldea tu realidad y c칩mo transformarlo en tu aliado...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('sue침o')">
                <div class="blog-img lazy-bg" data-bg="imgs/Higiene.jpg"></div>
                <div class="blog-content">
                    <span class="tag tag-cuerpo">Cuerpo</span>
                    <h3>Higiene del Sue침o</h3>
                    <p>쯉ab칤as que dormir bien es la base de tu salud mental? Mejora tu descanso hoy mismo...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('tiempo')">
                <div class="blog-img lazy-bg" data-bg="imgs/gestion_tiempo.jpg"></div>
                <div class="blog-content">
                    <span class="tag tag-mente">Mente</span>
                    <h3>Gesti칩n del Tiempo</h3>
                    <p>Evita la procrastinaci칩n y el agobio acad칠mico con t칠cnicas de organizaci칩n efectiva...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('resiliencia')">
                <div class="blog-img lazy-bg"
                    data-bg="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600"></div>
                <div class="blog-content">
                    <span class="tag tag-mente">Mente</span>
                    <h3>Resiliencia Emocional</h3>
                    <p>Convierte los desaf칤os en fuerza para tu futuro. Aprende a navegar las crisis...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('alimentacion')">
                <div class="blog-img lazy-bg"
                    data-bg="https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=600"></div>
                <div class="blog-content">
                    <span class="tag tag-cuerpo">Cuerpo</span>
                    <h3>Nutrici칩n y 츼nimo</h3>
                    <p>C칩mo lo que comes influye en tu felicidad. El eje intestino-cerebro explicado...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('digital')">
                <div class="blog-img lazy-bg"
                    data-bg="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600">
                </div>
                <div class="blog-content">
                    <span class="tag tag-digital">Digital</span>
                    <h3>Bienestar Digital</h3>
                    <p>L칤mites saludables para las redes sociales y c칩mo evitar la fatiga mental...</p>
                </div>
            </article>

            <article class="blog-card" onclick="openModal('apoyo')">
                <div class="blog-img lazy-bg" data-bg="imgs/redes_apoyo.jpg"></div>
                <div class="blog-content">
                    <span class="tag tag-social">Social</span>
                    <h3>Redes de Apoyo</h3>
                    <p>La importancia de conectar con otros y la valent칤a de saber pedir ayuda...</p>
                </div>
            </article>
        </div>
    </main>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <footer>
        <p>&copy; 2023 Proyecto de Apoyo Estudiantil. Todos los derechos reservados.</p>
        <p>Instituci칩n Educativa Fiscal - Dolores Sucre</p>
    </footer>

    <script>
        // Sustituye esta URL por la de tu BACKEND en Render
        const API_URL = "https://mente-sana-frontend.onrender.com";
        const hamburger = document.querySelector(".hamburger");
        const navMenu = document.querySelector(".nav-menu");

        hamburger.addEventListener("click", () => {
            hamburger.classList.toggle("active");
            navMenu.classList.toggle("active");
        });

        // Funci칩n para marcar el enlace activo
        function setActiveLink() {
            const currentPath = window.location.pathname.split("/").pop();
            const navLinks = document.querySelectorAll('.nav-link');

            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        window.onload = setActiveLink;

        const lecturas = {
            'respiracion': {
                titulo: 'Respiraci칩n Consciente: El Interruptor del Calma',
                texto: `
                    <p>En el ajetreo de los ex치menes y las responsabilidades del bachillerato, nuestra respiraci칩n suele volverse superficial y r치pida. Esto le indica a nuestro cerebro que estamos en peligro, activando el cortisol, la hormona del estr칠s.</p>
                    <p>La respiraci칩n consciente no es solo "tomar aire"; es una t칠cnica neurobiol칩gica. Al prolongar la exhalaci칩n, estimulamos el nervio vago, encargado de enviar una se침al de relajaci칩n a todo el cuerpo.</p>
                    <p><b>La T칠cnica 4-7-8:</b> Inhala por 4 segundos, mant칠n por 7 y exhala por 8. Repetir esto cuatro veces puede detener un ataque de ansiedad en potencia. Practicar esto antes de dormir permitir치 que tu mente sepa que est치 segura.</p>
                    <div class="pdf-container">
                        <span>Gu칤a completa de ejercicios respiratorios:</span>
                        <a href="https://www.who.int/docs/default-source/mental-health/sh-2020-spa-web.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
                    </div>
                `
            },
            'autoestima': {
                titulo: 'Autoestima: Sanando tu Di치logo Interno',
                texto: `
                    <p>La autoestima no se trata de creer que eres perfecto, sino de aceptarte mientras trabajas en tu crecimiento. Para muchos j칩venes, la presi칩n social crea un cr칤tico interno extremadamente severo.</p>
                    <p>A menudo somos m치s crueles con nosotros mismos de lo que ser칤amos con un amigo. El primer paso es identificar esos pensamientos negativos y cuestionar su veracidad. Construir una autoestima s칩lida requiere autocompasi칩n.</p>
                    <p>Reconocer que fallar es parte del proceso de aprendizaje es vital. Tu valor no est치 definido por tus logros acad칠micos, sino por tu integridad y tu esfuerzo diario.</p>
                    <div class="pdf-container">
                        <span>Cuaderno de ejercicios para la autoestima:</span>
                        <a href="https://ibp-psicologia.com/wp-content/uploads/2020/03/Ejercicios-Autoestima.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
                    </div>
                `
            },
            'sue침o': {
                titulo: 'Higiene del Sue침o: El Pilar del Rendimiento',
                texto: `
                    <p>Dormir no es un lujo, es una funci칩n reparadora esencial. Para un bachiller, la falta de sue침o se traduce en irritabilidad, falta de memoria y mayor riesgo de depresi칩n.</p>
                    <p>La higiene del sue침o implica crear rutinas: evitar pantallas 30 minutos antes de acostarse, mantener la habitaci칩n fresca y oscura, y evitar cafe칤na por la tarde. El cerebro necesita se침ales claras de que el d칤a ha terminado.</p>
                    <p>Cuando duermes lo suficiente, tu cerebro consolida lo que estudiaste y regula tus emociones, permiti칠ndote enfrentar los desaf칤os del d칤a siguiente con mayor claridad y paciencia.</p>
                    <div class="pdf-container">
                        <span>Recomendaciones para un mejor descanso:</span>
                        <a href="https://www.isglobal.org/documents/10179/7740833/17+Pautas+Higiene+Sue%C3%B1o.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
                    </div>
                `
            },
            'tiempo': {
                titulo: 'Gesti칩n del Tiempo: Menos Agobio, M치s Resultados',
                texto: `
                    <p>La sensaci칩n de "no tener tiempo" es una de las mayores fuentes de ansiedad acad칠mica. Organizar tus tareas no significa llenar cada minuto de estudio, sino aprender a priorizar lo importante.</p>
                    <p><b>La T칠cnica Pomodoro:</b> Trabaja en bloques de 25 minutos seguidos de 5 de descanso. Esto mantiene tu concentraci칩n alta y evita el agotamiento mental. Adem치s, aprender a decir "no" a distracciones digitales durante tus bloques de trabajo cambiar치 tu productividad.</p>
                    <p>Recuerda incluir siempre tiempo para el ocio y el descanso en tu planificaci칩n; una agenda sin espacios libres es una receta para el estr칠s cr칩nico.</p>
                    <div class="pdf-container">
                        <span>Plantilla y gu칤a de gesti칩n del tiempo:</span>
                        <a href="https://www.uaeh.edu.mx/docencia/VI_Lectura/bachillerato/documentos/2014/LECT111.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
                    </div>
                `
            },
            'resiliencia': {
                titulo: 'Resiliencia: El Arte de Navegar la Tormenta',
                texto: `
        <p>La resiliencia no es una cualidad m치gica con la que se nace; es una habilidad que se desarrolla a trav칠s de la experiencia. En el entorno escolar, esto significa aprender que un fracaso acad칠mico no define tu inteligencia, sino tu estrategia actual.</p>
        <p><b>Los tres pilares de la resiliencia:<br></b> 1) Aceptaci칩n de la realidad (esto est치 pasando), <br>2) B칰squeda de sentido (쯤u칠 puedo aprender de esto?) y <br>3) Capacidad de improvisar (쯖칩mo puedo resolverlo con lo que tengo ahora?).</p>
        <p>Cuando enfrentas un desaf칤o, tu cerebro libera hormonas que pueden nublar tu juicio. La persona resiliente hace una pausa, respira y se pregunta: "쮼sto importar치 dentro de cinco a침os?". Esta perspectiva ayuda a reducir el impacto emocional inmediato y permite actuar con mayor claridad.</p>
        <p>Recuerda que ser fuerte no significa no sentir dolor, sino permitirte sentirlo, procesarlo y seguir caminando con una nueva lecci칩n en la mochila.</p>
        <blockquote>"El fracaso es solo la oportunidad de comenzar de nuevo, esta vez de forma m치s inteligente."</blockquote>
        <div class="pdf-container">
            <span>Gu칤a pr치ctica de fortalecimiento emocional:</span>
            <a href="https://www.euskadi.eus/contenidos/informacion/dia_internacional_resiliencia/es_def/adjuntos/guia_resiliencia.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
        </div>
    `
            },
            'alimentacion': {
                titulo: 'Nutrici칩n y 츼nimo: El Eje Intestino-Cerebro',
                texto: `
        <p>Existe una comunicaci칩n constante entre tu sistema digestivo y tu cerebro. De hecho, el nervio vago act칰a como una autopista de informaci칩n donde el intestino env칤a mensajes sobre tu estado de bienestar. Si tu dieta se basa en alimentos ultraprocesados, tu cerebro recibe se침ales de inflamaci칩n, lo que se traduce en neblina mental y desgana.</p>
        <p><b>Alimentos para el estudio:</b> Los 치cidos grasos Omega-3 (presentes en nueces y pescados) son esenciales para las membranas de tus neuronas. Los carbohidratos de absorci칩n lenta (avena, granos integrales) evitan los picos de az칰car que causan sue침o a mitad de la ma침ana.</p>
        <p>Un factor olvidado es la hidrataci칩n: una deshidrataci칩n leve del 2% reduce dr치sticamente tu capacidad de concentraci칩n y memoria a corto plazo. Antes de buscar una bebida energ칠tica llena de az칰car, prueba a beber un vaso de agua; tu cerebro te lo agradecer치 con mayor claridad.</p>
        <div class="pdf-container">
            <span>Alimentaci칩n saludable para estudiantes:</span>
            <a href="https://www.fcomci.com/sites/default/files/guia_alimentacion_salud_mental.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
        </div>
    `
            },
            'digital': {
                titulo: 'Bienestar Digital: Protegiendo tu Enfoque',
                texto: `
        <p>Vivimos en la "econom칤a de la atenci칩n", donde las aplicaciones est치n dise침adas para mantenerte conectado el mayor tiempo posible mediante recompensas de dopamina (likes, notificaciones). El problema es que este ciclo agota tus reservas de energ칤a mental y te deja con una sensaci칩n de vac칤o o ansiedad.</p>
        <p><b>La trampa de la comparaci칩n:</b> En redes sociales, comparamos nuestro "detr치s de c치maras" con el "show de luces" de los dem치s. Olvidamos que lo que vemos es una versi칩n filtrada y curada de la realidad, lo que distorsiona nuestra percepci칩n de 칠xito y belleza.</p>
        <p><b>Reto de desconexi칩n:</b> Intenta el "Modo Avi칩n" durante las dos primeras horas de estudio y la 칰ltima hora antes de dormir. Recuperar el control de tu atenci칩n te permitir치 estudiar en menos tiempo y con mucha menos fatiga visual y mental.</p>
        <div class="pdf-container">
            <span>Manual de higiene digital y redes:</span>
            <a href="https://www.is4k.es/sites/default/files/contenidos/materiales/guias/is4k_guia_bienestar_digital.pdf" target="_blank" class="pdf-link">Descargar PDF</a>
        </div>
    `
            },
            'apoyo': {
                titulo: 'Redes de Apoyo: La Fuerza de la Conexi칩n',
                texto: `
        <p>Desde el punto de vista evolutivo, el aislamiento era una sentencia de muerte. Por eso, cuando nos sentimos solos o desconectados, nuestro cerebro activa 치reas relacionadas con el dolor f칤sico. Tener una red de apoyo no significa tener mil amigos en Facebook, sino contar con dos o tres personas con las que puedas ser vulnerable.</p>
        <p><b>쮺칩mo construir apoyo?</b> Empieza por ser t칰 esa red para alguien m치s. Escuchar sin juzgar y validar las emociones de tus compa침eros crea un entorno de seguridad mutua. En el colegio, tus tutores, el personal del DECE o tus mejores amigos son parte de este ecosistema.</p>
        <p>No esperes a estar en una crisis total para hablar. Compartir una peque침a preocupaci칩n hoy evita que se convierta en una monta침a ma침ana. Pedir ayuda no es rendirse, es negarse a rendirse solo.</p>
        <blockquote>"Pedir ayuda no es rendirse, es negarse a rendirse solo."</blockquote>
        <div class="pdf-container">
            <span>Folleto sobre salud social y comunidad:</span>
            <a href="https://www.paho.org/es/documentos/folleto-apoyo-social" target="_blank" class="pdf-link">Descargar PDF</a>
        </div>
    `
            }
        };

        // MODIFICACI칍N: Funci칩n para abrir (aseg칰rate de que incluya cargarComentarios)
        function openModal(id) {
            const data = lecturas[id];
            const overlay = document.getElementById('modalOverlay');

            const htmlComentarios = `
        <div class="comment-section">
            <h4>Comunidad y Experiencias</h4>
            <div class="comment-form">
                <input type="text" id="userName" class="comment-input-name" placeholder="Tu nombre o apodo...">
                <textarea id="userComment" class="comment-input-text" placeholder="Comparte tu reflexi칩n o consejo..."></textarea>
                <button class="btn-send-comment" onclick="saveComment('${id}')">Publicar comentario</button>
            </div>
            <div class="comments-list" id="commentsList">Cargando pensamientos...</div>
        </div>
    `;

            document.getElementById('modalBody').innerHTML = `<h2>${data.titulo}</h2>${data.texto}${htmlComentarios}`;

            overlay.style.display = 'flex';
            setTimeout(() => overlay.classList.add('active'), 10);

            cargarComentarios(id); // Cargamos los comentarios guardados
        }

        // MODIFICACI칍N: Funci칩n para cerrar (Activa la animaci칩n que ya tienes en CSS)
        function closeModal() {
            const overlay = document.getElementById('modalOverlay');
            overlay.classList.remove('active');
            overlay.classList.add('closing');

            // Esperamos 500ms (lo que dura tu transici칩n CSS) antes de ocultarlo
            setTimeout(() => {
                overlay.style.display = 'none';
                overlay.classList.remove('closing');
            }, 500);
        }

        // EXTRA: Cerrar al hacer clic fuera del cuadro blanco
        window.onclick = function (event) {
            const overlay = document.getElementById('modalOverlay');
            if (event.target == overlay) {
                closeModal();
            }
        }
        async function saveComment(lecturaId) {
            const nameInput = document.getElementById('userName');
            const commentInput = document.getElementById('userComment');

            const nombre = nameInput.value.trim();
            const contenido = commentInput.value.trim();

            if (!nombre || !contenido) {
                alert("Por favor, completa ambos campos para comentar.");
                return;
            }

            const nuevoComentario = {
                lectura_id: lecturaId,
                nombre: nombre,
                contenido: contenido
            };

            try {
                // Usamos la variable API_URL
                const response = await fetch(`${API_URL}/comentarios`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(nuevoComentario)
                });

                if (response.ok) {
                    nameInput.value = '';
                    commentInput.value = '';
                    cargarComentarios(lecturaId);
                } else {
                    const errorData = await response.json();
                    alert(errorData.error || "Hubo un error al guardar el comentario.");
                }
            } catch (error) {
                console.error("Error de conexi칩n:", error);
                alert("No se pudo conectar con el servidor de base de datos.");
            }
        }

        async function cargarComentarios(lecturaId) {
            const list = document.getElementById('commentsList');

            try {
                // Usamos la variable API_URL
                const response = await fetch(`${API_URL}/comentarios/${lecturaId}`);
                const comentarios = await response.json();

                if (comentarios.length === 0) {
                    list.innerHTML = '<p style="color: #7f8c8d; font-size: 0.9rem;">A칰n no hay comentarios. 춰S칠 el primero!</p>';
                    return;
                }

                list.innerHTML = comentarios.map(c => `
            <div class="comment-item">
                <div class="comment-header">
                    <span class="comment-author">${c.nombre}</span>
                    <span class="comment-date">${new Date(c.fecha).toLocaleDateString()}</span>
                </div>
                <p class="comment-text">${c.contenido}</p>
            </div>
        `).join('');

            } catch (error) {
                console.error("Error al cargar:", error);
                list.innerHTML = '<p style="color: #e74c3c;">Error al conectar con la base de datos.</p>';
            }
        }
    </script>

    <script>
        // --- L칍GICA DE PART칈CULAS ---
        const canvas = document.getElementById('canvas-particles');
        const ctx = canvas.getContext('2d');

        let particlesArray;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let mouse = {
            x: null,
            y: null,
            radius: (canvas.height / 80) * (canvas.width / 80)
        }

        window.addEventListener('mousemove', function (event) {
            mouse.x = event.x;
            mouse.y = event.y;
        });

        class Particle {
            constructor(x, y, directionX, directionY, size, color) {
                this.x = x;
                this.y = y;
                this.directionX = directionX;
                this.directionY = directionY;
                this.size = size;
                this.color = color;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = '#1abc9c'; // Color MenteSana (Turquesa)
                ctx.fill();
            }
            update() {
                // Rebotar en los bordes
                if (this.x > canvas.width || this.x < 0) {
                    this.directionX = -this.directionX;
                }
                if (this.y > canvas.height || this.y < 0) {
                    this.directionY = -this.directionY;
                }

                // Interacci칩n con el mouse (efecto de rechazo suave o conexi칩n)
                let dx = mouse.x - this.x;
                let dy = mouse.y - this.y;
                let distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < mouse.radius + this.size) {
                    if (mouse.x < this.x && this.x < canvas.width - this.size * 10) {
                        this.x += 10;
                    }
                    if (mouse.x > this.x && this.x > this.size * 10) {
                        this.x -= 10;
                    }
                    if (mouse.y < this.y && this.y < canvas.height - this.size * 10) {
                        this.y += 10;
                    }
                    if (mouse.y > this.y && this.y > this.size * 10) {
                        this.y -= 10;
                    }
                }

                // Mover part칤cula
                this.x += this.directionX;
                this.y += this.directionY;

                this.draw();
            }
        }

        // 1. Reducimos la cantidad de part칤culas (dividiendo por un n칰mero mayor)
        function init() {
            particlesArray = [];
            // Antes divid칤amos por 9000, ahora por 15000 (menos part칤culas = m치s velocidad)
            let numberOfParticles = (canvas.height * canvas.width) / 15000;

            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2) + 1; // Part칤culas un poco m치s peque침as
                let x = Math.random() * innerWidth;
                let y = Math.random() * innerHeight;
                let directionX = (Math.random() * 1) - 0.5; // Movimiento m치s lento y suave
                let directionY = (Math.random() * 1) - 0.5;
                let color = '#1abc9c';

                particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
            }
        }

        // 2. Optimizamos la conexi칩n (solo dibujar si est치n muy cerca)
        function connect() {
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let dx = particlesArray[a].x - particlesArray[b].x;
                    let dy = particlesArray[a].y - particlesArray[b].y;
                    let distance = dx * dx + dy * dy; // Usamos distancia al cuadrado (es m치s r치pido que Math.sqrt)

                    // Solo conectamos si la distancia es peque침a
                    let maxDistance = (canvas.width / 10) * (canvas.height / 10);
                    if (distance < maxDistance) {
                        let opacity = 1 - (distance / maxDistance);
                        ctx.strokeStyle = `rgba(26, 188, 156, ${opacity * 0.2})`; // L칤neas m치s tenues
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                        ctx.stroke();
                    }
                }
            }
        }

        // Bucle de animaci칩n
        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, innerWidth, innerHeight);

            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
            connect();
        }

        // Redimensionar si cambia la ventana
        window.addEventListener('resize', function () {
            canvas.width = innerWidth;
            canvas.height = innerHeight;
            mouse.radius = ((canvas.height / 80) * (canvas.height / 80));
            init();
        });

        // Arrancar
        init();
        animate();

        window.addEventListener('mouseout', function () {
            mouse.x = undefined;
            mouse.y = undefined;
        });

        document.addEventListener('DOMContentLoaded', function () {
            const observerOptions = {
                threshold: 0.15
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('reveal');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            const cards = document.querySelectorAll('.article-card');
            cards.forEach(card => {
                observer.observe(card);
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            const lazyImages = document.querySelectorAll(".lazy-bg");

            // Si el navegador soporta IntersectionObserver (Carga inteligente)
            if ("IntersectionObserver" in window) {
                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const div = entry.target;
                            const url = div.getAttribute("data-bg");

                            if (url) {
                                div.style.backgroundImage = `url('${url}')`;
                                div.classList.add("loaded");
                            }
                            observer.unobserve(div);
                        }
                    });
                }, { rootMargin: "100px" }); // Empieza a cargar 100px antes de verla

                lazyImages.forEach(img => observer.observe(img));
            } else {
                // Si el navegador es viejo, cargamos todo de golpe como antes
                lazyImages.forEach(div => {
                    div.style.backgroundImage = `url('${div.getAttribute("data-bg")}')`;
                    div.classList.add("loaded");
                });
            }
        });
    </script>
</body>

</html>